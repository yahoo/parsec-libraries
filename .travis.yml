dist: trusty
language: java
jdk:
- openjdk8
before_install:
## see https://docs.travis-ci.com/user/encrypting-filest/ on how travis encrypt/decrypt files
## encrypted secrect key for gpg private key for artifact sigining
- if [ "${TRAVIS_PULL_REQUEST}" == "false" ]; then openssl aes-256-cbc -K $encrypted_4f2072688125_key -iv $encrypted_4f2072688125_iv -in maintainer-secring.gpg.enc -out maintainer-secring.gpg -d; fi
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
script:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- ./gradlew check

## to avoid the "Current Git branch is "(HEAD detached at 004bae3)" and not "master"" error from the release plugin
- if [ "${TRAVIS_PULL_REQUEST}" == "false" ];then git checkout master;git remote set-url
  origin "https://$GITHUBKEY@github.com/yahoo/parsec-libraries";./gradlew release;fi
- if [ "${TRAVIS_PULL_REQUEST}" == "false" ]; then ./gradlew publish closeAndReleaseSonatypeStagingRepository; fi
env:
  global:
  ## SIGNING_KEYID
  - secure: aTby+jTNOP9tpVZUq0jp9BE7f+0ynapOCnuAvPWFkAm48S+LmAncbmlb6TODd0G1TZABTGJUswJOSRp20CKRrb2R1OyJG/hiIgBWPwQbF/zUyJ6dxzD/N33J8Q2DtXmCePt3duGMiGcsEYCYUd3mZZ/Bo1ZskyJa0PDUjrgtmB2Zm3MMJITB0WDJtK211KYSoL7D6KxrZIURDwq/Gj/jLbAz6qyhXQ4UiPWChjxVGIE+6NZA/01guW8dE7j4tlEd5JxKL4SVvap1SdxN2kxeIx6aApUi82zAP06+Sa3uEy9bFfebiM9LtcE876QggmEPYRMTy0QL6emcIVtM4HLgS586nf5latZCmi2KCAlVixb1Z1vHpm0S8V6pXkBT8VqyCa39PLkMAqbmIYcwV/DnILSBxHuiV2A+dcOiiT2+ybCWiaPFRE+UGfpdv7xl8qrVQE7B6AjUT4zTKJbCDj/zuQghN73dRv2A0Ei4wkbZE3reJzorSVK7srqg5vPzom6+FLrWt+SmJNAqkoWBPVJ0yBuzYk/zrS5kHvr5U8B1YLA34EaLReeuGgt9reks6JxOyrcMJw5om9BWs19J13jF7F2mQ7JGvkzkofqL3BtT7ZsvGzf08LZf5Yqs8tA1S//xZb5kp/piqTBLpk+awUtFsMRTbK1evRZifYaZDnnN50Q=
  ##SIGNING_PWD
  - secure: AbkL5/xfIPDGpS4rt+qLonk2q8PAz1YN3OYCeI1R0F3rriIWu4sS7b0QO+jSMNv1Rsz2+fmAz3sQUDXGTl7MErDAFoLfp5y6STI3cWM0R5OOuMgGbl+N5A3zQDwcpngXgHwrJT0la7hyF8+cmAmby2ms67+heywJXnjtRRzbYppkSewdI4EDcuKVJZ7Sixb1dp22ByMzONhWzH/GBWW/38NtklR4huldW5tOvGeXuYiwgPDs9JYwQI6nuHTcz/IH8OGNr4JdzhiaGb03weFJ90JM+5oYiTHtu2on3oXgRDFYwORGy5+yM1JBAV486CS66zpGBB2wZXrkAhEj5lBzws7+3gXIL+LiANPx3klGPQN9FDGNUjo1sHooqYoUEGoyB+Wgv3eSbHAS3rDfriUcHtBNrKUviCmZqk8pW3KkfHL2PDm6gfjpuQ0cAT1JnhqgPMBoTPnY08o1crOgIT7CU6LPZBWow/tEG2lz8sNbcKnQQKuhX8Hhi+45s/noJLumzHtmQBlUWxYGYSqmlQDbSjvmXXMxQigkdSOtW521f8Jg2glnyJRzw3LEkMMTfeiZKoREivHTp+S7eWgHJAHfgKSNY3RQE81QEzy2A6yx5eMiUXeB57jZUGtdozt5TwHX3IrFApMA5kB83aOgAGayVymp7lYARwL/SNlehpfqzZU=
  ##OSS_USER (ask guang001)
  - secure: myJsotdtEPBfSOgWkJGYOX9+c7WELrP8Ahqz8MyPcoW382jkC+IaSWgdUqx5iwWZ9hLf/R420tpcV03VfgTVvno42cDCBnh3vBOV/u/Bi3FBEdA1flgm+a95rAJ2yxS5xSDkhJ7t9sNRGizmO+tV54VTE79PlAS1FAIzw98z3SxRn8AbT10HFx/O0TktiOY/hzXuiOxrzu4uInfMtWUbjkpSNnlzYJgXD+P2nw11HDuFOu53Y4ptg+E8i8wz13Q1z25o33dHCSpb+auShH00/C66th9/B+SW5ynbkp6uNnVHtqinjBqeK+FL9v2nzN23Mgk9Nb6aP579yjpUFm21Hb9pMhksWRYmKx3NdQWqZvgmpd7cwkZQOsqDZYkgwwWb9khFWDglynvLgOlD999D0HKQaemQlHv6Q3hjeVZw+TwvOG/AqLiYIvK0IXCNQaWmXj2RV0NDPuZNzANnAHUDvSXwZiukYH7fIzyt+NZqcEM8G23KurEyS+0opl5UbyWgm5YGkXi8DC5tb1v4VVxWSDYGnOhfJfNWQNHfGXmAKlsm8PJ/TqseNHF/BwQ6LU7dYSvSu7ERt7f56GBaxiDWTN0P2OAJj1SrbWqeERMiKTS9aTGx99+2Z0g+5ow5k3cikDOg34ntm2agj8wfZsbU9CO83EvQXbcoQ0KqTJ+L7K0=
  ##- secure: QyuTkYL8jxVu0VNN1cyYiZUPGi9rg/GmVONssus9XJWpDJCfb2S74vHQzLjanrJtaXfx6iNd5BfxnDi7vo/BLlkDyCY/iOidlsprDFrtxqJNHtY9O5C6ciBl0nhtBllIV6RMdTE9av4qw1UpKYiM+9Qu8HKaEdhMGHvOCPwlO8eJjb2sDrBGPHNT0hsEC9S+LWNRV3NNk5C9zlpSCq2vmy3VzyFMQ7OSAOBvLK1GD3TMJrMmvUJvKWjwu8dwhPKir3fzD0WQNRMdIEmvkGTyZaeAbKlfd4IuQn+yZSsERzWaVMUXldDiZEry96t7mvDJYnl6kPhKIc4ApVJ9MulPbCTZ4AmDheju4D/tjonDXb2KTbRrdbIqRPhU3wWYKo9g598nKXY3wvAWdOYgnPzbIIjls5FLEL50lcQc/HqMArSmjyDZSkIG6yqXNiUSWtYLp8+4AVaGCFsid+63xd0qlx2pN4uDBTHu5Dh/cZMr1gESFE+rAWuv5d1pdFaZpRUvBMx/9kG5bT9SMPttyCUc3fCFUTaY1JufR0mGreVH/MTZOZKJiE2DQvZRwF+u7MuJ0X5E8MB5OFJS48ds5q7PXpWfi/c6GL81OVT8mcHmOkP1B02bNZtjt4kzADHjbyUfvi7T7UGVA63xl9CTweVCwDkziXu2oDvkwWE9INsezQM=
  ##OSS_PW  (ask guang001)
  - secure: eVrAWMXMT9/iHpTR+N4ZLVRAUd20DZTseL/pc+JOAvflHDRhsWcJhp7p5CzqDPEc81FlRkn5Jc+pSYFJ2XeT9483/Lu79SDnrOA/rov0QFVv0W+G9LiRMgsyDOX9C2/MmcE+Dvw2OPCEgESyBTaqXZZF6bsSesFG7Yzx+NrLsKSxpA8ec64InnuhVyLCP80ebq9Tbl1RldncSTg9vGjzXNw0HXOO0aI0v/yrmIybpCmJAtnwD8MpwfLCbFfE6rkEqmPcAbKqQH8inzeQf99geXfu2oW0fTdC06OX+r5i3xy9u5FzjSpqbYtAguZWJReOvitmBCaTMwXDvTQT2dPt1AKhWZqdQ4F21wDIAL4YJAuiq4BUOt/6t/suf0OpkfSwN/UsiF8ePjKOYvZpfvMXtTlQaalzWJxLEz3l+eKDVUzQZ9LaXdZOESUi4q0Bgg6S3/vERFH+xVCg3BqP5AcvpzdbVvK//2nkqMdQHbvlOV2neFFhrstRBrgWqmS4JleYy1TqfX5+GKVvicRk7Mk5BxvGMs47ADCfQPBb0JoLGAr+Wrw9Oe8I/PDyWLH3MOeJLQ7St9icRujLomR/O8P00SCff9rGApR3RCnTQLYt4L9b94+Lg7RaS+NSD9uedXJ0Ic7bQFnrFagEp+7gWEnG5HABgaoSuRyWiyUIbPpV34w=
  ##- secure: mq3Wb6ffmPbKGVv3ErzxbD2AfCojkorp9Y9xQHnzbtx70vF+T6mLe2cV3rmr7c+v98ZOHFhoxD9n2j2r/IaDWUaXuaSWxGPN4UUwLa/DHvafcBysygD2s9YrI/d5err6r5GwPLrGW4v4FqfYEW1AyefHiOedGx98B+f3ZJbVlZtLM6yS1o6w6Cbl19FK74yF+BSPmKMoGNzfLfZ9y9N/fs1ZX+bcu85Eyu/Sa07+v9GxLfM72Ky2Xl4zwX9HBFTVYahHoOu4no5T/lL+2vRNGQT80fM9EohA2VXqj8zW9O79DLUgwavkA0zOA95UWR4jBvwL/oOcz27i1+yE8spDh/lXbkrn47MQXZe9z+blymGPDVOsL9GtZSEM0fFscPSNvEAgH7LfJhD3wXYv5pjj2CJIFCMq/wT6at7aaryoLcrWrwHLLmbNAvZyhOlIbTetcqqr1mj8XwBF9Z8HOnr0qQilcST+EwpfyA5pLjS16Xjw6iYWEjBDfNI3Zu796qXQtQKBmwn9KBXeIgD1rUXWfTIIdDWyVKxnPcjQtHnccO9pdWzdnGR25xrQBoeGEl1X97PUuMZRyWsv6E6My6r6g5CKAy6hTB6mQxWjqV75N4daamsbyZdDKgbfs6b1hsORHaIlLub2d8LF1F36gNh7qx0L5H7jTkXQWqUTr+IE/jo=
  ##GITHUBKEY (ask baiyi)
  - secure: p+QZf07ifZ9+UtMJ/CFqoAM2AweSWNwYqjTf6t5+m8UUC7KomlohKdhYh1Kl9b7V0q2OHeWbEFHIFV5zpFYbkSNNtQFLkGyA0Ai6pCpojLa3ctRCl5uDl89ANP96ucMf8KMDSV0Bc106Hqxf5mG1w97AprivvV1D77WUZmhisnHe7187QRG2LpJm1qcy7FGo04x06ddSbKt6mrN1Gg6U3NmBAOWY5Gp1oEcqS5/nybkSz0ZZSocJPhRuxEwPb1WkdsZ57ccbf3PYAeQtuPp3658A+wvQd2b0NGAcMkvgemlcepzLrxXwbovUl427VPJZ3M5cgtHix9bDvFd6LfVy7YKecIMVFNViKKLcdBfW9Df5/O8ik05pXwS7bNqWp9cj6s+bDsY+IiaKzVf7d7iJhaiwprqyOgYIlQndGiUmmjWy7XDehrocyyzkD9sKDt8IuIwLIlqwF6HwjYo95oU36ZuIesXOjnEesY+zReoOw9FztFcM2goD77Zen6gI+2gmLTQc7jh3zHWLYJm2EKaukYGCm3rEs30f04gUjMLj5o7hXqkKOhbRSpVGdAq2QWj54aA3ORKEdxEO/ium3M/npbeHXtLEUhV7IhptMFDdfFZ3AAexvtuP/yzOYS+pWgud/HR89bOVBFtXakJBY0Rq7wGRTHLS5dUuhhysnuHvErg=
branches:
  only:
  - master
